// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Language {
  id                  Int                   @id @default(autoincrement())
  nativeName          String                @unique
  englishName         String                @unique
  isoTwoLetter        String                @unique
  i18nModule          I18nModule[]
  i18nContentModule   I18nContentModule[]
  i18nIndustry        I18nIndustry[]
  i18nContentIndustry I18nContentIndustry[]
  i18nNews            I18nNews[]
  i18nContentNews     I18nContentNews[]
  i18nCareer          I18nCareer[]
  i18nFaq             I18nFaq[]
}

// Module
model Module {
  id            Int             @id @default(autoincrement())
  label         String          @unique
  contentModule ContentModule[]
  i18nModule    I18nModule[]
}

model I18nModule {
  module      Module   @relation(fields: [moduleId], references: [id])
  moduleId    Int
  language    Language @relation(fields: [languageId], references: [id])
  languageId  Int
  label       String
  description String?

  @@id([moduleId, languageId])
}

model ContentModule {
  id                Int                 @id @default(autoincrement())
  module            Module              @relation(fields: [moduleId], references: [id])
  moduleId          Int
  displayOrder      Int
  mediaPath         String?
  i18nContentModule I18nContentModule[]
}

model I18nContentModule {
  contentModule   ContentModule @relation(fields: [contentModuleId], references: [id])
  contentModuleId Int
  language        Language      @relation(fields: [languageId], references: [id])
  languageId      Int
  content         String

  @@id([contentModuleId, languageId])
}

// Industry
model Industry {
  id              Int               @id @default(autoincrement())
  label           String            @unique
  contentIndustry ContentIndustry[]
  i18nIndustry    I18nIndustry[]
}

model I18nIndustry {
  industry   Industry @relation(fields: [industryId], references: [id])
  industryId Int
  language   Language @relation(fields: [languageId], references: [id])
  languageId Int
  label      String

  @@id([industryId, languageId])
}

model ContentIndustry {
  id                  Int                   @id @default(autoincrement())
  industry            Industry              @relation(fields: [industryId], references: [id])
  industryId          Int
  displayOrder        Int
  mediaPath           String?
  i18nContentIndustry I18nContentIndustry[]
}

model I18nContentIndustry {
  contentIndustry   ContentIndustry @relation(fields: [contentIndustryId], references: [id])
  contentIndustryId Int
  language          Language        @relation(fields: [languageId], references: [id])
  languageId        Int
  content           String

  @@id([contentIndustryId, languageId])
}

// News
model News {
  id          Int           @id @default(autoincrement())
  label       String        @unique
  postedAt    DateTime      @default(now())
  contentNews ContentNews[]
  i18nNews    I18nNews[]
}

model I18nNews {
  news       News     @relation(fields: [newsId], references: [id])
  newsId     Int
  language   Language @relation(fields: [languageId], references: [id])
  languageId Int
  label      String

  @@id([newsId, languageId])
}

model ContentNews {
  id              Int               @id @default(autoincrement())
  news            News              @relation(fields: [newsId], references: [id])
  newsId          Int
  displayOrder    Int               @default(9999)
  mediaPath       String            @default("")
  youtubeEmbedId  String            @default("")
  publishedAt     DateTime          @default(now())
  i18nContentNews I18nContentNews[]
}

model I18nContentNews {
  contentNews   ContentNews @relation(fields: [contentNewsId], references: [id])
  contentNewsId Int
  language      Language    @relation(fields: [languageId], references: [id])
  languageId    Int
  content       String      @default("")

  @@id([contentNewsId, languageId])
}

// Career
model Career {
  id         Int          @id @default(autoincrement())
  minYearExp Float
  label      String       @unique
  i18nCareer I18nCareer[]
}

model I18nCareer {
  career          Career   @relation(fields: [careerId], references: [id])
  careerId        Int
  language        Language @relation(fields: [languageId], references: [id])
  languageId      Int
  title           String   @unique
  description     String   @default("")
  requiredSkills  String   @default("")
  preferredSkills String   @default("")

  @@id([careerId, languageId])
}

model Faq {
  id           Int       @id @default(autoincrement())
  displayOrder Int       @default(9999)
  i18nFaq      I18nFaq[]
}

model I18nFaq {
  faq        Faq      @relation(fields: [faqId], references: [id])
  faqId      Int
  language   Language @relation(fields: [languageId], references: [id])
  languageId Int
  question   String   @unique
  answer     String   @unique
}

// Contact
model Contact {
  id               Int      @id @default(autoincrement())
  firstName        String
  lastName         String
  organizationName String
  email            String
  phoneNumber      String
  message          String
  createdAt        DateTime
}
